<div class="modal">
  <div class="modal-content">
    <button class="close-button" (click)="cancel()">X</button>
    <h2>Create Appointment</h2>

    <form [formGroup]="appointmentForm" (ngSubmit)="save()">
      <div *ngIf="loadError" class="error">{{ loadError }}</div>

      <div class="form-group">
        <label for="client">Client</label>
        <select id="client" formControlName="clientId">
          <option value="">Select Client</option>
          <option *ngFor="let c of clients" [value]="c.id">{{ c.fullName }}</option>
        </select>
        <div *ngIf="appointmentForm.controls['clientId'].invalid && appointmentForm.controls['clientId'].touched" class="error">
          Client is required
        </div>
      </div>

      <div class="form-group">
        <label for="nutritionist">Nutritionist</label>
        <select id="nutritionist" formControlName="nutritionistId">
          <option value="">Select Nutritionist</option>
          <option *ngFor="let n of nutritionists" [value]="n.id">{{ n.fullName }}</option>
        </select>
        <div
          *ngIf="appointmentForm.controls['nutritionistId'].invalid && appointmentForm.controls['nutritionistId'].touched"
          class="error"
        >
          Nutritionist is required
        </div>
      </div>

      <div class="form-group">
        <label for="appointmentDate">Appointment Date</label>
        <input id="appointmentDate" type="date" formControlName="appointmentDate" />
        <div
          *ngIf="appointmentForm.controls['appointmentDate'].invalid && appointmentForm.controls['appointmentDate'].touched"
          class="error"
        >
          Appointment date is required
        </div>
      </div>

      <button type="submit" [disabled]="isSubmitting">{{ isSubmitting ? 'Saving...' : 'Save Appointment' }}</button>
    </form>
  </div>
</div>
